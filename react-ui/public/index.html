<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
     <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto" rel="stylesheet">
     
    <title>Tiffani's Portfolio</title>
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    
       <style type="text/css">
        canvas, canvas[resize] {
        width: 100%;
        height: 95vh;
        }

        #canvas {
            z-index: -1;
            top: 0;
        }

        .cartoon {
            width: 95%;
            position: absolute;
            z-index: 50;
            top: 150px;
            display: block;
            padding: 10px;
            margin: auto;
            align-content: center;
        }

        .cartoon-image {
            background: url(/../src/assets/images/cartoonshot2.png);
            height: 300px;
            width: 320px;
            margin: auto;
            display: block;
            background-size: cover;
            -webkit-filter: drop-shadow(5px 5px 5px #29335C);
            filter: drop-shadow(5px 5px 5px #29335C); 
        }

        @-webkit-keyframes fadeinout {
          50% { opacity: 1; 
                animation-delay: 2s;
          }
        }

        @keyframes fadeinout {
          50% { opacity: 1;} 
                
        }

        .hatch{
            animation-name: hatch;
            -webkit-animation-name: hatch;  

            animation-duration: 2s; 
            -webkit-animation-duration: 2s;

            animation-timing-function: ease-in-out; 
            -webkit-animation-timing-function: ease-in-out;

            transform-origin: 50% 100%;
            -ms-transform-origin: 50% 100%;
            -webkit-transform-origin: 50% 100%; 

            visibility: visible !important;     
        }

        @keyframes hatch {
            0% {
                transform: rotate(0deg) scaleY(0.6);
            }
            20% {
                transform: rotate(-2deg) scaleY(1.05);
            }
            35% {
                transform: rotate(2deg) scaleY(1);
            }
            50% {
                transform: rotate(-2deg);
            }   
            65% {
                transform: rotate(1deg);
            }   
            80% {
                transform: rotate(-1deg);
            }       
            100% {
                transform: rotate(0deg);
            }                                   
        }

        @-webkit-keyframes hatch {
            0% {
                -webkit-transform: rotate(0deg) scaleY(0.6);
            }
            20% {
                -webkit-transform: rotate(-2deg) scaleY(1.05);
            }
            35% {
                -webkit-transform: rotate(2deg) scaleY(1);
            }
            50% {
                -webkit-transform: rotate(-2deg);
            }   
            65% {
                -webkit-transform: rotate(1deg);
            }   
            80% {
                -webkit-transform: rotate(-1deg);
            }       
            100% {
                -webkit-transform: rotate(0deg);
            }       
        }

    </style>
    <div class="paperscript">
        <div class="canvas">
            <canvas id="canvas" resize="true"></canvas>
            <div class="cartoon hatch">
                <div class="cartoon-image">
                    <img class="cartoon-image" src="./cartoonshot2.png">
                </div>   
            </div>
        </div>
    </div>

    <script type="text/paperscript" canvas="canvas">

        var voronoi = new Voronoi();
        var sites = generateBeeHivePoints(view.size / 200, true);
        var bbox, diagram;
        var oldSize = view.size;
        var spotColor = new Color('#777DA7');
        var mousePos = view.center;
        var selected = false;

        onResize();

        function onMouseDown(event) {
            sites.push(event.point);
            renderDiagram();
        }

        function onMouseMove(event) {
            mousePos = event.point;
            if (event.count == 0)
                sites.push(event.point);
            sites[sites.length - 1] = event.point;
            renderDiagram();
        }

        function renderDiagram() {
            project.activeLayer.removeChildren();
            var diagram = voronoi.compute(sites, bbox);
            if (diagram) {
                for (var i = 0, l = sites.length; i < l; i++) {
                    var cell = diagram.cells[sites[i].voronoiId];
                    if (cell) {
                        var halfedges = cell.halfedges,
                            length = halfedges.length;
                        if (length > 2) {
                            var points = [];
                            for (var j = 0; j < length; j++) {
                                v = halfedges[j].getEndpoint();
                                points.push(new Point(v));
                            }
                            createPath(points, sites[i]);
                        }
                    }
                }
            }
        }

        function removeSmallBits(path) {
            var averageLength = path.length / path.segments.length;
            var min = path.length / 50;
            for (var i = path.segments.length - 1; i >= 0; i--) {
                var segment = path.segments[i];
                var cur = segment.point;
                var nextSegment = segment.next;
                var next = nextSegment.point + nextSegment.handleIn;
                if (cur.getDistance(next) < min) {
                    segment.remove();
                }
            }
        }

        function generateBeeHivePoints(size, loose) {
            var points = [];
            var col = view.size / size;
            for (var i = -1; i < size.width + 1; i++) {
                for (var j = -1; j < size.height + 1; j++) {
                    var point = new Point(i, j) / new Point(size) * view.size + col / 2;
                    if (j % 2)
                        point += new Point(col.width / 2, 0);
                    if (loose)
                        point += (col / 4) * Point.random() - col / 4;
                    points.push(point);
                }
            }
            return points;
        }
        function createPath(points, center) {
            var path = new Path();
            if (!selected) {
                path.fillColor = spotColor;
            } else {
                path.fullySelected = selected;
            }
            path.closed = true;

            for (var i = 0, l = points.length; i < l; i++) {
                var point = points[i];
                var next = points[(i + 1) == points.length ? 0 : i + 1];
                var vector = (next - point) / 2;
                path.add({
                    point: point + vector,
                    handleIn: -vector,
                    handleOut: vector
                });
            }
            path.scale(0.95);
            removeSmallBits(path);
            return path;
        }

        function onResize() {
            var margin = 20;
            bbox = {
                xl: margin,
                xr: view.bounds.width - margin,
                yt: margin,
                yb: view.bounds.height - margin
            };
            for (var i = 0, l = sites.length; i < l; i++) {
                sites[i] = sites[i] * view.size / oldSize;
            }
            oldSize = view.size;
            renderDiagram();
        }

        function onKeyDown(event) {
            if (event.key == 'space') {
                selected = !selected;
                renderDiagram();
            }
        }
    </script>
    <script type="text/javascript" src="../dist/paper-full.js"></script>
    <script type="text/javascript" src="../dist/rhill-voronoi-core.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.11.5/paper-full.js"></script>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    <div id="root"></div>
  </body>
</html>
